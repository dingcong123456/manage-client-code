webpackJsonp([1],{"+0oZ":function(e,t){},"+c8h":function(e,t){},"0VZb":function(e,t){},"2mV7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("gNcp"),r={};n.keys().forEach(function(e){"./index.js"!==e&&(r[e.replace(/(\.\/|\.js)/g,"")]=n(e).default)}),t.default=r},E9gs:function(e,t){},EVg2:function(e,t){},FdAB:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("j1ja");var n=a("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("keep-alive",[this.$route.meta.keepAlive?t("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():t("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},r,!1,function(e){a("oWsi")},null,null).exports,i=a("/ocq"),o=a("Xxa5"),l=a.n(o),c=a("exGp"),u=a.n(c),d=a("//Fk"),f=a.n(d),p=a("mtWM"),h=a.n(p),v="http://manage.sharezdm.cn/",m="http://47.101.184.42:5000/difftech/api/v0.1/",_="http://diff.mobi:7777/";function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return h()({url:_+"photo/list",method:"get",params:{page_num:t,page_size:a,is_labeled:e}})}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return h()({url:v+"photo/list",method:"get",params:{page_num:t,page_size:a,manual_label:e},withCredentials:!0})}function w(){return h()({url:v+"feature/list",method:"get",withCredentials:!0})}function x(e){return h()({url:v+"feature/feature_answer",method:"delete",data:{id:e},withCredentials:!0})}function k(e){return h()({url:_+"photo/feature",method:"post",data:e})}function y(e){return h()({url:"http://diff.sharezdm.cn/index/analyzefacepro",method:"post",data:{image_url:e}})}function I(){return h()({url:"http://diff.sharezdm.cn/index/getuploadtoken",method:"get",withCredentials:!0})}function C(e){return h()({url:m+"features/"+e,method:"get",withCredentials:!0})}function $(e,t,a){return h()({url:m+"features/submit",method:"post",data:{img_id:e,feature_id:t,info:a},withCredentials:!0})}function U(e){return h()({url:m+"features/stats/"+e,method:"get",withCredentials:!0})}function F(e,t,a,n){return h()({url:m+"features/listimg/"+e,method:"get",params:{feature_id:t,page:a,size:n},withCredentials:!0})}function S(e){return h()({url:m+"features/imginfo/"+e,method:"get",withCredentials:!0})}function z(e,t){return h()({url:m+"features/discard",method:"post",data:{img_id:e,feature_id:t},withCredentials:!0})}function E(e){return-1!=e.indexOf("http")?e+"?imageView2/2/w/1024/h/1024":"http://pc43w2wc6.bkt.clouddn.com/"+e}h.a.interceptors.request.use(function(e){return e.headers.token="free",e},function(e){return f.a.reject(e)});var R={name:"Index",data:function(){return{activeName:"first",labelData:[],notLabelData:[],labelTotal:20,notLabelTotal:20,qiniuUrl:E}},mounted:function(){this.init()},methods:{init:function(){var e=this;return u()(l.a.mark(function t(){var a,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:return a=t.sent,e.labelData=a.data.data.photos,e.labelTotal=a.data.data.count,t.next=7,b(1);case 7:n=t.sent,e.notLabelData=n.data.data.photos,e.notLabelTotal=n.data.data.count;case 10:case"end":return t.stop()}},t,e)}))()},labelCurrentChange:function(e){var t=this;return u()(l.a.mark(function a(){var n;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b(0,e,20);case 2:n=a.sent,t.labelData=n.data.data.photos,t.labelTotal=n.data.data.count;case 5:case"end":return a.stop()}},a,t)}))()},notLabelCurrentChange:function(e){var t=this;return u()(l.a.mark(function a(){var n;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b(1,e,20);case 2:n=a.sent,t.notLabelData=n.data.data.photos,t.notLabelTotal=n.data.data.count;case 5:case"end":return a.stop()}},a,t)}))()},labelClick:function(e){console.log(e),this.$router.push({path:"/pc/label",query:{photo_id:e.id,file_url:e.file_url}})},updateLabelClick:function(e){console.log(e),this.$router.push({path:"/pc/update_label",query:{photo_id:e.id,file_url:e.file_url}})}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"未标注照片",name:"first"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.labelData}},[a("el-table-column",{attrs:{label:"照片",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{style:{backgroundImage:"url("+e.qiniuUrl(t.row.file_url)+")",backgroundSize:"cover",width:"75px",height:"75px"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"照片id",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.labelClick(t.row)}}},[e._v("标注")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":20,layout:"prev, pager, next",total:e.labelTotal},on:{"current-change":e.labelCurrentChange}})],1)],1)},staticRenderFns:[]};var q=a("VU/8")(R,B,!1,function(e){a("E9gs")},"data-v-e843bf72",null).exports,D={data:function(){return{ruleForm2:{account:"",pass:""},rules2:{pass:[{validator:function(e,t,a){""===t?a(new Error("请输入密码")):a()},trigger:"blur"}],account:[{validator:function(e,t,a){""===t?a(new Error("请输入账户")):a()},trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var n,r;(n=t.ruleForm2.account,r=t.ruleForm2.pass,h()({url:m+"features/login",method:"post",data:{username:n,password:r},withCredentials:!0})).then(function(e){e.data.code?a.$router.push("/choose"):(t.$message({type:"error",message:e.data.msg}),t.ruleForm2={account:"",pass:""})})})},resetForm:function(e){this.$refs[e].resetFields()}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"login"},[a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{"label-position":"left",model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"账户",prop:"account"}},[a("el-input",{model:{value:e.ruleForm2.account,callback:function(t){e.$set(e.ruleForm2,"account",t)},expression:"ruleForm2.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"pass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm2.pass,callback:function(t){e.$set(e.ruleForm2,"pass",t)},expression:"ruleForm2.pass"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm2")}}},[e._v("登录")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("ruleForm2")}}},[e._v("重置")])],1)],1)],1)])},staticRenderFns:[]};var P=a("VU/8")(D,j,!1,function(e){a("vUjk")},"data-v-6b1cdbb9",null).exports,L={data:function(){var e=this;return{ruleForm2:{account:"",pass:"",checkPass:""},rules2:{checkPass:[{validator:function(t,a,n){""===a?n(new Error("请再次输入密码")):a!==e.ruleForm2.pass?n(new Error("两次输入密码不一致!")):n()},trigger:"blur"}],pass:[{validator:function(e,t,a){""===t?a(new Error("请输入密码")):a()},trigger:"blur"}],account:[{validator:function(e,t,a){""===t?a(new Error("请输入账户")):a()},trigger:"blur"}]}}},methods:{submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")})},resetForm:function(e){this.$refs[e].resetFields()}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"login"},[a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{"label-position":"left",model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"账户",prop:"account"}},[a("el-input",{model:{value:e.ruleForm2.account,callback:function(t){e.$set(e.ruleForm2,"account",e._n(t))},expression:"ruleForm2.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"pass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm2.pass,callback:function(t){e.$set(e.ruleForm2,"pass",t)},expression:"ruleForm2.pass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.$set(e.ruleForm2,"checkPass",t)},expression:"ruleForm2.checkPass"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"}},[e._v("注册")])],1)],1)],1)])},staticRenderFns:[]};var N=a("VU/8")(L,A,!1,function(e){a("EVg2")},"data-v-3b4dc030",null).exports,T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"768px","box-sizing":"border-box",border:"1px solid #eee"}},[a("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[a("el-menu",{attrs:{"default-openeds":["1","3"]}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-message"}),e._v("导航一")]),e._v(" "),a("el-menu-item-group",[a("template",{slot:"title"},[e._v("分组一")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-1"},on:{click:function(t){e.$router.push("/pc/feature")}}},[e._v("脸部特征管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-2"},on:{click:function(t){e.$router.push("/pc/test")}}},[e._v("测试AI标注")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-3"},on:{click:function(t){e.$router.push("/pc/index")}}},[e._v("手工标注(业务)")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-3"},on:{click:function(t){e.$router.push("/pc/train")}}},[e._v("手工标注(训练)")])],2),e._v(" "),a("el-submenu",{attrs:{index:"1-4"}},[a("template",{slot:"title"},[e._v("选项4")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-4-1"}},[e._v("选项4-1")])],2)],2),e._v(" "),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),e._v("导航二")]),e._v(" "),a("el-menu-item-group",[a("template",{slot:"title"},[e._v("分组一")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-1"}},[e._v("选项1")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-2"}},[e._v("选项2")])],2),e._v(" "),a("el-menu-item-group",{attrs:{title:"分组2"}},[a("el-menu-item",{attrs:{index:"2-3"}},[e._v("选项3")])],1),e._v(" "),a("el-submenu",{attrs:{index:"2-4"}},[a("template",{slot:"title"},[e._v("选项4")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-4-1"}},[e._v("选项4-1")])],2)],2),e._v(" "),a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-setting"}),e._v("导航三")]),e._v(" "),a("el-menu-item-group",[a("template",{slot:"title"},[e._v("分组一")]),e._v(" "),a("el-menu-item",{attrs:{index:"3-1"}},[e._v("选项1")]),e._v(" "),a("el-menu-item",{attrs:{index:"3-2"}},[e._v("选项2")])],2),e._v(" "),a("el-menu-item-group",{attrs:{title:"分组2"}},[a("el-menu-item",{attrs:{index:"3-3"}},[e._v("选项3")])],1),e._v(" "),a("el-submenu",{attrs:{index:"3-4"}},[a("template",{slot:"title"},[e._v("选项4")]),e._v(" "),a("el-menu-item",{attrs:{index:"3-4-1"}},[e._v("选项4-1")])],2)],2)],1)],1),e._v(" "),a("el-container",[a("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[a("el-dropdown",[a("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px"}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[e._v("查看")]),e._v(" "),a("el-dropdown-item",[e._v("新增")]),e._v(" "),a("el-dropdown-item",[e._v("删除")])],1)],1),e._v(" "),a("span",[e._v("王小虎")])],1),e._v(" "),a("el-main",[a("router-view")],1)],1)],1)},staticRenderFns:[]};var W=a("VU/8")({name:"pc"},T,!1,function(e){a("b5gC")},null,null).exports,V={name:"Index",data:function(){return{activeName:"first",labelData:[],notLabelData:[],labelTotal:20,notLabelTotal:20,qiniuUrl:E}},mounted:function(){this.init()},methods:{init:function(){var e=this;return u()(l.a.mark(function t(){var a,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return a=t.sent,e.labelData=a.data.data.rows,e.labelTotal=a.data.data.count,t.next=7,g(1);case 7:n=t.sent,e.notLabelData=n.data.data.rows,e.notLabelTotal=n.data.data.count;case 10:case"end":return t.stop()}},t,e)}))()},labelCurrentChange:function(e){var t=this;return u()(l.a.mark(function a(){var n;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g(0,e,20);case 2:n=a.sent,t.labelData=n.data.data.rows,t.labelTotal=n.data.data.count;case 5:case"end":return a.stop()}},a,t)}))()},notLabelCurrentChange:function(e){var t=this;return u()(l.a.mark(function a(){var n;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g(1,e,20);case 2:n=a.sent,t.notLabelData=n.data.data.rows,t.notLabelTotal=n.data.data.count;case 5:case"end":return a.stop()}},a,t)}))()},labelClick:function(e){console.log(e),this.$router.push({path:"/pc/label",query:{id:e.id,user_id:e.user_id,file_url:e.file_url}})},updateLabelClick:function(e){console.log(e),this.$router.push({path:"/pc/update_label",query:{id:e.id,user_id:e.user_id,file_url:e.file_url}})}}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"未标注照片",name:"first"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.labelData}},[a("el-table-column",{attrs:{label:"照片",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{style:{backgroundImage:"url("+e.qiniuUrl(t.row.file_url)+")",backgroundSize:"cover",width:"75px",height:"75px"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"照片id",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"上传时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.labelClick(t.row)}}},[e._v("标注")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":20,layout:"prev, pager, next",total:e.labelTotal},on:{"current-change":e.labelCurrentChange}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"已标注照片",name:"second"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.notLabelData}},[a("el-table-column",{attrs:{label:"照片",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{style:{backgroundImage:"url("+e.qiniuUrl(t.row.file_url)+")",backgroundSize:"cover",width:"75px",height:"75px"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"照片id",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"上传时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.updateLabelClick(t.row)}}},[e._v("更改标注")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":20,layout:"prev, pager, next",total:e.notLabelTotal},on:{"current-change":e.notLabelCurrentChange}})],1)],1)},staticRenderFns:[]};var M=a("VU/8")(V,H,!1,function(e){a("gsAJ")},"data-v-58338f1b",null).exports,O=a("woOf"),X=a.n(O),Z={name:"Label",data:function(){return{qiniuUrl:E,labelInfo:{face_shape:0,eyes_inner_shape:0,eyes_swell:0,eyes_single_double:0,face_best_width:0,face_length_width_ratio:0,jaw_shape:0,face_three_short:0,face_three_long:0,face_frontal_bone:0,eyebrow_color:100,nose_height:100,mouth_gagtooth:100,face_bone_feel:100,forehead_width:100},photo_id:"",file_url:"",count:0}},methods:{next:function(){var e=this;return u()(l.a.mark(function t(){var a,n,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=X()({photo_id:parseInt(e.photo_id)},e.labelInfo),console.log(a),t.next=4,k(a);case 4:n=t.sent,(r=n.data.data.photo)||e.$message({message:"没有更多了",type:"warning"}),e.$router.push({path:"/pc/label",query:{photo_id:r.id,file_url:r.file_url,count:n.data.data.count}}),window.location.reload();case 9:case"end":return t.stop()}},t,e)}))()},init:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.photo_id=e.$route.query.photo_id,e.file_url=e.$route.query.file_url,e.count=e.$route.query.count;case 3:case"end":return t.stop()}},t,e)}))()}},components:{},mounted:function(){this.init()}},J={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"label-box"},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("眉毛颜色浅 ")]),e._v(" "),a("el-slider",{staticStyle:{width:"300px"},attrs:{"input-size":"small"},model:{value:e.labelInfo.eyebrow_color,callback:function(t){e.$set(e.labelInfo,"eyebrow_color",t)},expression:"labelInfo.eyebrow_color"}}),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("眉毛颜色深 ")])],1),e._v(" "),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("鼻梁低 ")]),e._v(" "),a("el-slider",{staticStyle:{width:"300px"},attrs:{"input-size":"small"},model:{value:e.labelInfo.nose_height,callback:function(t){e.$set(e.labelInfo,"nose_height",t)},expression:"labelInfo.nose_height"}}),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("鼻梁高 ")])],1),e._v(" "),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("没有凸嘴龅牙 ")]),e._v(" "),a("el-slider",{staticStyle:{width:"300px"},attrs:{"input-size":"small"},model:{value:e.labelInfo.mouth_gagtooth,callback:function(t){e.$set(e.labelInfo,"mouth_gagtooth",t)},expression:"labelInfo.mouth_gagtooth"}}),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("严重凸嘴龅牙 ")])],1),e._v(" "),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("骨骼感低 ")]),e._v(" "),a("el-slider",{staticStyle:{width:"300px"},attrs:{"input-size":"small"},model:{value:e.labelInfo.face_bone_feel,callback:function(t){e.$set(e.labelInfo,"face_bone_feel",t)},expression:"labelInfo.face_bone_feel"}}),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("骨骼感强烈 ")])],1),e._v(" "),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("窄额头 ")]),e._v(" "),a("el-slider",{staticStyle:{width:"300px"},attrs:{"input-size":"small"},model:{value:e.labelInfo.forehead_width,callback:function(t){e.$set(e.labelInfo,"forehead_width",t)},expression:"labelInfo.forehead_width"}}),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("宽额头 ")])],1),e._v(" "),a("div",{staticClass:"radioBox"},[a("div",{staticClass:"title"},[e._v("脸型")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.labelInfo.face_shape,callback:function(t){e.$set(e.labelInfo,"face_shape",t)},expression:"labelInfo.face_shape"}},[e._v("鹅蛋脸")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.labelInfo.face_shape,callback:function(t){e.$set(e.labelInfo,"face_shape",t)},expression:"labelInfo.face_shape"}},[e._v("长方脸")]),e._v(" "),a("el-radio",{attrs:{label:2},model:{value:e.labelInfo.face_shape,callback:function(t){e.$set(e.labelInfo,"face_shape",t)},expression:"labelInfo.face_shape"}},[e._v("倒三角脸")]),e._v(" "),a("el-radio",{attrs:{label:3},model:{value:e.labelInfo.face_shape,callback:function(t){e.$set(e.labelInfo,"face_shape",t)},expression:"labelInfo.face_shape"}},[e._v("钻石脸")]),e._v(" "),a("br"),e._v(" "),a("el-radio",{attrs:{label:4},model:{value:e.labelInfo.face_shape,callback:function(t){e.$set(e.labelInfo,"face_shape",t)},expression:"labelInfo.face_shape"}},[e._v("梨形脸")]),e._v(" "),a("el-radio",{attrs:{label:5},model:{value:e.labelInfo.face_shape,callback:function(t){e.$set(e.labelInfo,"face_shape",t)},expression:"labelInfo.face_shape"}},[e._v("心形脸")]),e._v(" "),a("el-radio",{attrs:{label:6},model:{value:e.labelInfo.face_shape,callback:function(t){e.$set(e.labelInfo,"face_shape",t)},expression:"labelInfo.face_shape"}},[e._v("圆脸")]),e._v(" "),a("el-radio",{attrs:{label:7},model:{value:e.labelInfo.face_shape,callback:function(t){e.$set(e.labelInfo,"face_shape",t)},expression:"labelInfo.face_shape"}},[e._v("方脸")])],1),e._v(" "),a("div",{staticClass:"radioBox"},[a("div",{staticClass:"title"},[e._v("内眼角形状")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.labelInfo.eyes_inner_shape,callback:function(t){e.$set(e.labelInfo,"eyes_inner_shape",t)},expression:"labelInfo.eyes_inner_shape"}},[e._v("内眼角形状清晰")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.labelInfo.eyes_inner_shape,callback:function(t){e.$set(e.labelInfo,"eyes_inner_shape",t)},expression:"labelInfo.eyes_inner_shape"}},[e._v("内眼角形状不清晰")])],1),e._v(" "),a("div",{staticClass:"radioBox"},[a("div",{staticClass:"title"},[e._v("眼皮肿泡")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.labelInfo.eyes_swell,callback:function(t){e.$set(e.labelInfo,"eyes_swell",t)},expression:"labelInfo.eyes_swell"}},[e._v("眼皮有肿泡")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.labelInfo.eyes_swell,callback:function(t){e.$set(e.labelInfo,"eyes_swell",t)},expression:"labelInfo.eyes_swell"}},[e._v("眼皮无肿泡")])],1),e._v(" "),a("div",{staticClass:"radioBox"},[a("div",{staticClass:"title"},[e._v("眼皮单双")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.labelInfo.eyes_single_double,callback:function(t){e.$set(e.labelInfo,"eyes_single_double",t)},expression:"labelInfo.eyes_single_double"}},[e._v("单眼皮")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.labelInfo.eyes_single_double,callback:function(t){e.$set(e.labelInfo,"eyes_single_double",t)},expression:"labelInfo.eyes_single_double"}},[e._v("双眼皮")])],1),e._v(" "),a("div",{staticClass:"radioBox"},[a("div",{staticClass:"title"},[e._v("脸部最宽的位置")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.labelInfo.face_best_width,callback:function(t){e.$set(e.labelInfo,"face_best_width",t)},expression:"labelInfo.face_best_width"}},[e._v("上庭")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.labelInfo.face_best_width,callback:function(t){e.$set(e.labelInfo,"face_best_width",t)},expression:"labelInfo.face_best_width"}},[e._v("中庭")]),e._v(" "),a("el-radio",{attrs:{label:2},model:{value:e.labelInfo.face_best_width,callback:function(t){e.$set(e.labelInfo,"face_best_width",t)},expression:"labelInfo.face_best_width"}},[e._v("下庭")])],1),e._v(" "),a("div",{staticClass:"radioBox"},[a("div",{staticClass:"title"},[e._v("脸部长宽比")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.labelInfo.face_length_width_ratio,callback:function(t){e.$set(e.labelInfo,"face_length_width_ratio",t)},expression:"labelInfo.face_length_width_ratio"}},[e._v("显著脸长大于脸宽")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.labelInfo.face_length_width_ratio,callback:function(t){e.$set(e.labelInfo,"face_length_width_ratio",t)},expression:"labelInfo.face_length_width_ratio"}},[e._v("长宽比合适")]),e._v(" "),a("el-radio",{attrs:{label:2},model:{value:e.labelInfo.face_length_width_ratio,callback:function(t){e.$set(e.labelInfo,"face_length_width_ratio",t)},expression:"labelInfo.face_length_width_ratio"}},[e._v("长度快要等于宽度了")])],1),e._v(" "),a("div",{staticClass:"radioBox"},[a("div",{staticClass:"title"},[e._v("下巴形状")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.labelInfo.jaw_shape,callback:function(t){e.$set(e.labelInfo,"jaw_shape",t)},expression:"labelInfo.jaw_shape"}},[e._v("方下巴")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.labelInfo.jaw_shape,callback:function(t){e.$set(e.labelInfo,"jaw_shape",t)},expression:"labelInfo.jaw_shape"}},[e._v("圆下巴")]),e._v(" "),a("el-radio",{attrs:{label:2},model:{value:e.labelInfo.jaw_shape,callback:function(t){e.$set(e.labelInfo,"jaw_shape",t)},expression:"labelInfo.jaw_shape"}},[e._v("尖下巴")])],1),e._v(" "),a("div",{staticClass:"radioBox"},[a("div",{staticClass:"title"},[e._v("三庭中最短的")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.labelInfo.face_three_short,callback:function(t){e.$set(e.labelInfo,"face_three_short",t)},expression:"labelInfo.face_three_short"}},[e._v("上庭")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.labelInfo.face_three_short,callback:function(t){e.$set(e.labelInfo,"face_three_short",t)},expression:"labelInfo.face_three_short"}},[e._v("中庭")]),e._v(" "),a("el-radio",{attrs:{label:2},model:{value:e.labelInfo.face_three_short,callback:function(t){e.$set(e.labelInfo,"face_three_short",t)},expression:"labelInfo.face_three_short"}},[e._v("下庭")])],1),e._v(" "),a("div",{staticClass:"radioBox"},[a("div",{staticClass:"title"},[e._v("三庭中最长的")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.labelInfo.face_three_long,callback:function(t){e.$set(e.labelInfo,"face_three_long",t)},expression:"labelInfo.face_three_long"}},[e._v("上庭")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.labelInfo.face_three_long,callback:function(t){e.$set(e.labelInfo,"face_three_long",t)},expression:"labelInfo.face_three_long"}},[e._v("中庭")]),e._v(" "),a("el-radio",{attrs:{label:2},model:{value:e.labelInfo.face_three_long,callback:function(t){e.$set(e.labelInfo,"face_three_long",t)},expression:"labelInfo.face_three_long"}},[e._v("下庭")])],1),e._v(" "),a("div",{staticClass:"radioBox"},[a("div",{staticClass:"title"},[e._v("颧骨高低")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.labelInfo.face_frontal_bone,callback:function(t){e.$set(e.labelInfo,"face_frontal_bone",t)},expression:"labelInfo.face_frontal_bone"}},[e._v("高")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.labelInfo.face_frontal_bone,callback:function(t){e.$set(e.labelInfo,"face_frontal_bone",t)},expression:"labelInfo.face_frontal_bone"}},[e._v("低")])],1),e._v(" "),a("div",{staticClass:"feature-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("下一个")])],1),e._v(" "),e.count?a("div",[e._v("还有 "+e._s(e.count)+" 张未标注")]):e._e()]),e._v(" "),a("div",{staticClass:"photo-box",style:{backgroundImage:"url("+e.qiniuUrl(e.file_url)+")",backgroundSize:"cover"}})])},staticRenderFns:[]};var G=a("VU/8")(Z,J,!1,function(e){a("xx10")},"data-v-1156415d",null).exports,Q=a("fZjL"),Y=a.n(Q),K=a("mvHQ"),ee=a.n(K),te={data:function(){return{circles:[[143,198],[154,168]],scaling:1,computedFeatures:[]}},props:{photoId:{type:Number},fileUrl:{type:String,default:"http://os6zbdtt2.bkt.clouddn.com/Fmn93Hl1NzY2A9dP-FgBmrNzRxMa?nsukey=SoEyfKwopX0ZH%2FuoHP1Ua0s6xaa4DL6iW19AcUv6O%2Boenz4C25HDtZSIlkpHXh8NSvsi1fjAEGrCYrW%2BIpwRz%2FlYmzj53JVNt8iIgXERi2XX6VG5hWn8Mx75U%2F2qHQcvN9TJGT7y%2BXsjhLvjHAMP6vReveDWDdxKD9e46hk6rsuZUMU%2BznUPpAa8txpzGarQNoG2a%2FfZCvU4yg0LhZQBAg%3D%3D"}},mounted:function(){this.init()},methods:{computedFeature:function(){var e,t,a=void 0;e=this.circles,(t=(e[37][1]-e[19][1])/(e[41][1]-e[37][1]))>2&&(t=2),t<.1&&(t=.1),a=parseInt(t/2*100)+"--"+(t>1?"眉眼间距远":t<.5?"眉眼间距近":"眉眼间距适中"),this.computedFeatures.push(a),a=function(e){var t=Math.abs(e[36][0]-e[17][0])/(e[21][0]-e[17][0]);return t>.4&&(t=.4),t<.01&&(t=.01),parseInt(2.5*t*100)+"--"+(t>.2?"眉眼位置长过眼角20%":t<.2?"眉眼位置短于眼角20%":"眉眼位置适中")}(this.circles),this.computedFeatures.push(a),a=function(e){var t=e[22][0]-e[21][0]-(e[42][0]-e[39][0]);return t>1.5&&(t=1.5),t<.5&&(t=.5),parseInt(100*(t-.5))+"--"+(t>1.1?"眉头相对宽于内眼角位置":t<.9?"眉头相对窄于内眼角位置":"眉头相对等于内眼角位置")}(this.circles),this.computedFeatures.push(a),a=function(e){var t=(e[41][1]-e[37][1])/(e[39][0]-e[36][0]);return t>.5&&(t=.5),t<.1&&(t=.1),parseInt(2*t*100)+"--"+(t>.35?"眼睛纵向长度大":t<.3?"眼睛纵向长度小":"眼睛纵向长度中等")}(this.circles),this.computedFeatures.push(a),a=function(e){var t=(e[42][0]-e[39][0])/(e[39][0]-e[36][0]);return t>1.5&&(t=1.5),t<.5&&(t=.5),parseInt(100*(t-.5))+"--"+(t>1.1?"眼间距远":t<.9?"眼间距近":"眼间距适中")}(this.circles),this.computedFeatures.push(a),a=function(e){var t=(e[39][0]-e[36][0])/(e[16][0]-e[0][0]);return t>.4&&(t=.4),t<.1&&(t=.1),parseInt(2.5*t*100)+"--"+(t>.25?"眼睛长":t<.18?"眼睛短":"眼睛长短中等")}(this.circles),this.computedFeatures.push(a),a=function(e){var t=parseInt((e[16][0]-e[0][0])/(e[45][0]-e[36][0])/(e[16][0]-e[0][0]));return t>.4&&(t=.4),t<.1&&(t=.1),parseInt(2.5*t*100)+"--"+(t>.25?"外眼角离脸部轮廓短":t<.18?"外眼角离脸部轮廓长":"外眼角离脸部轮廓适中")}(this.circles),this.computedFeatures.push(a),a=function(e){var t=(e[54][0]-e[48][0])/(e[35][0]-e[31][0]);return t>2&&(t=2),t<1&&(t=1),parseInt(100*(t-1))+"--"+(t>1.7?"嘴巴大":t<1.4?"嘴巴小":"嘴巴适中")}(this.circles),this.computedFeatures.push(a),a=function(e){var t=(e[62][0]-e[51][0])/(e[8][0]-e[33][0]);return t>.25&&(t=.25),t<.05&&(t=.05),parseInt(4*t*100)+"--"+(t>.15?"嘴唇厚":t<.1?"嘴唇薄":"嘴唇厚度适中")}(this.circles),this.computedFeatures.push(a),a=function(e){var t=(e[35][0]-e[31][0])/(e[42][0]-e[39][0]);return t>1.5&&(t=1.5),t<.5&&(t=.5),parseInt(100*(t-.5))+"--"+(t>1.1?"鼻翼宽":t<.9?"鼻翼窄":"鼻翼适中")}(this.circles),this.computedFeatures.push(a),a=function(e){var t=[{name:"上庭",length:e[19][1]-e[73][1]},{name:"中庭",length:e[33][1]-e[19][1]},{name:"下庭",length:e[8][1]-e[33][1]}],a=t.reduce(function(e,t){return e.length>t.length?e:t}),n=t.reduce(function(e,t){return e.length<t.length?e:t});return a.name+"最长，"+n.name+"最短"}(this.circles),this.computedFeatures.push(a)},addPonit:function(){var e=this;return u()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.circles.map(function(t){return[t.x*e.scaling,t.y*e.scaling]}),t.next=3,n=ee()(a),r=e.photoId,h()({url:v+"photo/point_info",method:"post",data:{point_info:n,photo_id:r},withCredentials:!0});case 3:e.$message({message:"更新成功",type:"success"});case 4:case"end":return t.stop()}var n,r},t,e)}))()},formDataCircles:function(){if(this.circles=this.circles.map(function(e){return{x:e[0],y:e[1],isSelected:!1}}),82!==this.circles.length){var e=this.circles[28],t=this.circles[29],a={x:t.x-(t.y-e.y),y:t.y,isSelected:!1},n={x:t.x+(t.y-e.y),y:t.y,isSelected:!1};this.circles.push(a),this.circles.push(n)}},close:function(){this.$emit("close")},init:function(){var e=this;return u()(l.a.mark(function t(){var a,n,r,s,i,o,c,u,d,f,p,m,_,b;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return b=function(e){console.log(e);for(var t=e.pageX-i.getBoundingClientRect().left,a=e.pageY-i.getBoundingClientRect().top,r=n.length-1;r>=0;r--){var s=n[r];if(Math.sqrt(Math.pow(s.x-t,2)+Math.pow(s.y-a,2))<=u)return null!=f&&(f.isSelected=!1),f=s,s.isSelected=!0,_(p),i.onmousemove=function(e){var t=e.clientX-i.getBoundingClientRect().left,a=e.clientY-i.getBoundingClientRect().top;null!=f&&(f.isSelected=!1),f=s,s.isSelected=!0,s.x=t,s.y=a,_(p)},void(i.onmouseup=function(){i.onmousemove=null,i.onmouseup=null})}},_=function(e){o.clearRect(0,0,i.width,i.height),o.drawImage(e,0,0,i.width,i.height);for(var t=0;t<n.length;t++){var a=n[t];a.scale||(a.scale=!0,a.x=a.x/r.scaling,a.y=a.y/r.scaling);var s=m[0];t<=67&&(s=m[1]),t>=n.length-2&&(s=m[2]),t>67?(u=3,o.font="12px blod",o.fillStyle="blue",o.fillText(t,a.x+8,a.y-6)):u=1.5,o.globalAlpha=.85,o.beginPath(),o.arc(a.x,a.y,u,0,2*Math.PI),a.isSelected?(o.strokeStyle=s,o.lineWidth=3,o.stroke()):(o.fillStyle=s,o.fill())}},t.next=4,l=e.photoId,h()({url:v+"photo/point_info",method:"get",params:{photo_id:l},withCredentials:!0});case 4:(a=t.sent).data.data.label_point_info?e.circles=JSON.parse(a.data.data.label_point_info):e.circles=JSON.parse(a.data.data.point_info),e.computedFeature(),e.formDataCircles(),n=e.circles,r=e,s=e.fileUrl,i=document.createElement("canvas"),o=i.getContext("2d"),c=new Image,u=1.5,d=500,f=void 0,p=void 0,m=["#409EFF","white","green"],i.onmousedown=b,c.onload=function(e){r.scaling=this.width/d,i.width=this.width/r.scaling,i.height=this.height/r.scaling,_(p=this),r.$refs.container.appendChild(i)},c.src=s;case 22:case"end":return t.stop()}var l},t,e)}))()}}},ae={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wrapper"},[t("div",{staticClass:"btnBox"},[t("el-button",{attrs:{type:"primary"},on:{click:this.addPonit}},[this._v("更新")])],1),this._v(" "),t("div",{ref:"container"}),this._v(" "),t("div",[this._v("\n    "+this._s(this.computedFeatures.join("，"))+"\n    ")])])},staticRenderFns:[]};var ne=a("VU/8")(te,ae,!1,function(e){a("PI9Q")},"data-v-0337b966",null).exports,re={name:"Label",data:function(){return{answerData:[],qiniuUrl:E,showPointBox:!1}},methods:{handleClick:function(e,t){console.log(e,t)},next:function(){var e=this;return u()(l.a.mark(function t(){var a,n,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=!0,n={},e.answerData.forEach(function(e,t){n[e.info.key]={},e.list.forEach(function(t,r){t.answer||(a=!1);var s=t.item.id.toString();n[e.info.key][s]=t.answer})}),a){t.next=6;break}return e.$message.error("请将所有项目选择完，不能有不选的"),t.abrupt("return");case 6:return r={user_id:e.$route.query.user_id,photo_id:e.$route.query.id,base_feature:n},t.next=9,k(r);case 9:e.$message({message:"更改完成",type:"success"});case 10:case"end":return t.stop()}},t,e)}))()},init:function(){var e=this;return u()(l.a.mark(function t(){var a,n,r,s,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o=e.$route.query.id,h()({url:v+"feature/photo_feature",method:"get",params:{photo_id:o},withCredentials:!0});case 2:return a=t.sent,n=[],t.next=6,w();case 6:if(r=t.sent,a.data.data)!function(){var t={};Y()(a.data.data.base_feature).forEach(function(e){t=X()({},t,a.data.data.base_feature[e])});var s=function(e){var a=function(a){Y()(t).forEach(function(n){r.data.data[e].list[a].item.id!==parseInt(n)||(r.data.data[e].list[a].answer=t[n])})};for(var s in r.data.data[e].list)a(s);n.push(r.data.data[e])};for(var i in r.data.data)s(i);e.answerData=n}();else{for(s in r.data.data){for(i in r.data.data[s].list)r.data.data[s].list[i].answer="";n.push(r.data.data[s])}console.log(n),e.answerData=n}case 8:case"end":return t.stop()}var o},t,e)}))()}},mounted:function(){this.init()},components:{NosePoit:ne}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"label-box"},[e._l(e.answerData,function(t){return a("div",[a("div",[a("span",{staticClass:"group-name"},[e._v(e._s(t.info.name))]),e._v(" "),e._l(t.list,function(t){return a("div",{staticClass:"feature-box"},[a("div",{staticClass:"feature-name"},[e._v(e._s(t.item.name))]),e._v(" "),a("div",{staticClass:"feature-list"},e._l(t.answer_list,function(n,r){return a("el-radio",{key:r,attrs:{label:n.id},model:{value:t.answer,callback:function(a){e.$set(t,"answer",a)},expression:"feature.answer"}},[e._v(e._s(n.name))])}))])})],2)])}),e._v(" "),a("div",{staticClass:"feature-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("更新")])],1)],2),e._v(" "),a("div",{staticClass:"point-box"},[a("nose-poit",{attrs:{fileUrl:e.qiniuUrl(e.$route.query.file_url),photoId:parseInt(e.$route.query.id)},on:{close:function(t){e.showPointBox=!1}}})],1)])},staticRenderFns:[]};var ie=a("VU/8")(re,se,!1,function(e){a("0VZb")},"data-v-412eb9b6",null).exports,oe={name:"Index",data:function(){return{treeData:[],defaultProps:{children:"children",label:"label"}}},mounted:function(){this.init()},methods:{delOpen:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u()(l.a.mark(function a(){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x(e);case 2:t.init(),t.$message({type:"success",message:"删除成功!"});case 4:case"end":return a.stop()}},a,t)}))).catch(function(){t.$message({type:"info",message:"已取消删除"})})},open:function(e){var t,a=this;this.$prompt("请输入名字","添加",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((t=u()(l.a.mark(function t(n){var r=n.value;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n=e,s=r,h()({url:v+"feature/feature_answer",method:"post",data:{feature_item_id:n,name:s},withCredentials:!0});case 2:a.init(),a.$message({type:"success",message:"添加成功!"});case 4:case"end":return t.stop()}var n,s},t,a)})),function(e){return t.apply(this,arguments)})).catch(function(){a.$message({type:"info",message:"取消输入"})})},openAddFeature:function(e){var t,a=this;this.$prompt("请输入名字","添加",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((t=u()(l.a.mark(function t(n){var r=n.value;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,addFeature(e,r);case 2:case"end":return t.stop()}},t,a)})),function(e){return t.apply(this,arguments)})).catch(function(){a.$message({type:"info",message:"取消输入"})})},renderContent:function(e,t){var a=this,n=t.node,r=t.data;t.store;return e("span",{class:"custom-tree-node"},[e("span",[n.label]),e("span",[2==n.level?e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){2==n.level&&a.open(r.item.id)}}},["添加"]):null,3==n.level?e("el-button",{attrs:{size:"mini",type:"text"},on:{click:u()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.delOpen(r.id);case 1:case"end":return e.stop()}},e,a)}))}},["删除"]):null])])},handleNodeClick:function(e){console.log(e)},init:function(){var e=this;return u()(l.a.mark(function t(){var a,n,r,s,i,o;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:for(r in a=t.sent,n=[],a.data.data){for(i in(s=a.data.data[r]).label=s.info.name,s.list){for(o in s.list[i].label=s.list[i].item.name,s.list[i].answer_list)s.list[i].answer_list[o].label=s.list[i].answer_list[o].name;s.list[i].children=s.list[i].answer_list}s.children=s.list,n.push(s)}console.log(n),e.treeData=n;case 7:case"end":return t.stop()}},t,e)}))()},handleClick:function(e){this.$router.push({path:"/label",query:{id:e.id}})}}},le={render:function(){var e=this.$createElement;return(this._self._c||e)("el-tree",{attrs:{data:this.treeData,props:this.defaultProps,accordion:"","render-content":this.renderContent},on:{"node-click":this.handleNodeClick}})},staticRenderFns:[]};var ce=a("VU/8")(oe,le,!1,function(e){a("OhVj")},"data-v-5afcaebc",null).exports,ue={data:function(){return{imageUrl:"",originalUrl:"",width:"",height:"",originalFile:"",uploadTime:"",analyzeFaceTime:"",url:"",loading:!1}},methods:{uploadBase64:function(e){var t=this;return u()(l.a.mark(function a(){var n,r,s,i,o,c,u,d,f,p;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=t,r=new Date,s=e.split(","),i=s[0].match(/:(.*?);/)[1],o=i.length,c=parseInt(o+13),u=(u=e.substring(c)).replace(/^.*?,/,""),a.next=8,I();case 8:d=(d=a.sent).data.data.token,f="http://upload.qiniup.com/putb64/-1",(p=new XMLHttpRequest).onreadystatechange=function(){if(4==p.readyState){var e=new Date-r;n.uploadTime=e;var t="http://pc43w2wc6.bkt.clouddn.com/"+JSON.parse(p.responseText).hash;n.url=t,n.analyzeFace()}},p.open("POST",f,!0),p.setRequestHeader("Content-Type","application/octet-stream"),p.setRequestHeader("Authorization","UpToken "+d),p.send(u);case 17:case"end":return a.stop()}},a,t)}))()},upload:function(e){var t=this;return u()(l.a.mark(function a(){var n,r,s,i,o,c,u,d;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return");case 2:return t.loading=!0,t.imageUrl=URL.createObjectURL(e),t.getWH(),a.prev=5,n=new Date,a.next=9,I();case 9:return r=(r=a.sent).data.data.token,(s=new FormData).append("token",r),s.append("file",e),a.next=16,l=s,h()({url:"http://upload.qiniup.com",method:"post",data:l});case 16:return i=a.sent,o=i.data.hash,c="http://pc43w2wc6.bkt.clouddn.com/"+o,t.url=c,u=new Date,d=u-n,t.uploadTime=d,a.next=25,t.analyzeFace();case 25:a.next=31;break;case 27:a.prev=27,a.t0=a.catch(5),console.log(a.t0),t.loading=!1;case 31:case"end":return a.stop()}var l},a,t,[[5,27]])}))()},analyzeFace:function(){var e=this;return u()(l.a.mark(function t(){var a,n,r,s,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.url){t.next=3;break}return t.abrupt("return");case 3:return n=new Date,t.next=6,y(a);case 6:r=t.sent,s=new Date,i=s-n,e.analyzeFaceTime=i,e.loading=!1,e.drawPoint(r.data.data.faceInfo.landmark);case 12:case"end":return t.stop()}},t,e)}))()},getWH:function(){var e=this,t=new Image;t.onload=function(t){e.width=this.width,e.height=this.height},t.src=this.imageUrl},selectImg:function(e){var t=e.target.files[0];this.imageUrl=URL.createObjectURL(t),this.originalUrl=URL.createObjectURL(t),this.originalFile=t,this.getWH()},zoom:function(e){this.loading=!0;var t=this,a=document.createElement("canvas"),n=a.getContext("2d"),r=new Image;r.onload=function(r){var s=this.width/e,i=this.height/s;a.width=e,a.height=i,n.drawImage(this,0,0,e,i);var o=a.toDataURL("image/png");t.imageUrl=o,t.getWH(),t.uploadBase64(o)},r.src=this.originalUrl},drawPoint:function(e){var t=this,a=document.createElement("canvas"),n=a.getContext("2d"),r=new Image;r.onload=function(r){a.width=this.width,a.height=this.height,n.drawImage(this,0,0,this.width,this.height),e.forEach(function(e,t){var a=e[0],r=e[1],s=2*Math.PI;n.beginPath(),n.fillStyle="#409EFF",n.arc(a,r,3,0,s),n.fill()});var s=a.toDataURL("image/png");t.imageUrl=s},r.src=this.imageUrl}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"top"},[a("div",{staticClass:"imgBox"},[a("img",{attrs:{src:e.imageUrl,alt:""}})]),e._v(" "),a("div",{staticClass:"info"},[a("p",[e._v("当前宽度: "+e._s(this.width)+"px")]),e._v(" "),a("p",[e._v("当前高度: "+e._s(this.height)+"px")]),e._v(" "),a("p",[e._v("上传时间: "+e._s(this.uploadTime)+"ms")]),e._v(" "),a("p",[e._v("识别时间: "+e._s(this.analyzeFaceTime)+"ms")])])]),e._v(" "),a("div",{staticClass:"btnBox"},[a("input",{attrs:{name:"file",type:"file",accept:"image/*"},on:{change:e.selectImg}}),e._v(" "),a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.upload(e.originalFile)}}},[e._v("原图识别")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.zoom(1024)}}},[e._v("压缩1024识别")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.zoom(512)}}},[e._v("压缩512识别")])],1)],1)])},staticRenderFns:[]};var fe=a("VU/8")(ue,de,!1,function(e){a("+c8h")},"data-v-7bd112ec",null).exports,pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"featureBox"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$router.push("/forehead")}}},[e._v("标记额头")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$router.push("/jaw")}}},[e._v("标记下巴")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$router.push("/skeleton")}}},[e._v("标记脸部骨骼感")])],1)},staticRenderFns:[]};var he=a("VU/8")({data:function(){return{}},methods:{},mounted:function(){}},pe,!1,function(e){a("WBNu")},"data-v-9cb48558",null).exports,ve={data:function(){return{scaling:1,circles:[],fileUrl:"http://os6zbdtt2.bkt.clouddn.com/Fmn93Hl1NzY2A9dP-FgBmrNzRxMa?nsukey=SoEyfKwopX0ZH%2FuoHP1Ua0s6xaa4DL6iW19AcUv6O%2Boenz4C25HDtZSIlkpHXh8NSvsi1fjAEGrCYrW%2BIpwRz%2FlYmzj53JVNt8iIgXERi2XX6VG5hWn8Mx75U%2F2qHQcvN9TJGT7y%2BXsjhLvjHAMP6vReveDWDdxKD9e46hk6rsuZUMU%2BznUPpAa8txpzGarQNoG2a%2FfZCvU4yg0LhZQBAg%3D%3D",imgId:"",count:{0:0,1:1}}},methods:{formDataCircles:function(){this.circles=this.circles.map(function(e){return{x:e[0],y:e[1]}})},discard:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.circles=[],t.next=3,e.getImgUrl();case 3:e.$refs.canvasWrapper.removeChild(e.$refs.canvasWrapper.firstChild),e.init();case 5:case"end":return t.stop()}},t,e)}))()},sendPoint:function(){var e=this;return u()(l.a.mark(function t(){var a,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.circles.map(function(t){return[parseInt(t.x*e.scaling),parseInt(t.y*e.scaling)]}),t.next=3,$(e.imgId,0,ee()(a));case 3:n=t.sent,console.log(n),e.discard();case 6:case"end":return t.stop()}},t,e)}))()},revocation:function(){this.circles.pop(),this.$refs.canvasWrapper.removeChild(this.$refs.canvasWrapper.firstChild),this.init()},getImgUrl:function(){var e=this;return u()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(0);case 2:return a=t.sent,e.fileUrl=E(a.data.data.url),e.imgId=a.data.data.img_id,t.next=7,U(e.$store.state.userInfo.username);case 7:a=t.sent,e.count=a.data.data;case 9:case"end":return t.stop()}},t,e)}))()},init:function(){var e=this;return u()(l.a.mark(function t(){var a,n,r,s,i,o,c,u,d,f,p;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:p=function(e){console.log(e);var t=e.pageX-s.getBoundingClientRect().left,n=e.pageY-s.getBoundingClientRect().top;a.circles.push({x:t,y:n,scale:!0}),f(u),console.log(a.circles)},f=function(e){i.clearRect(0,0,s.width,s.height),i.drawImage(e,0,0,s.width,s.height);for(var t=0;t<n.length;t++){var r=n[t];r.scale||(r.scale=!0,r.x=r.x/a.scaling,r.y=r.y/a.scaling),i.font="12px blod",i.fillStyle="red",i.fillText(t+1,r.x+8,r.y-6),i.globalAlpha=.85,i.beginPath(),i.arc(r.x,r.y,o,0,2*Math.PI),i.fillStyle="blue",i.fill()}},a=e,n=e.circles,r=e.fileUrl,s=document.createElement("canvas"),i=s.getContext("2d"),o=3,c=e.$refs.canvasWrapper.offsetWidth,e.$refs.canvasWrapper.style.height=c+"px",u=void 0,d=new Image,s.onmousedown=p,d.onload=function(e){this.width>this.height?a.scaling=this.width/c:a.scaling=this.height/c,s.width=this.width/a.scaling,s.height=this.height/a.scaling,console.log(a.scaling,s.width,s.height),f(u=this),a.$refs.canvasWrapper.appendChild(s)},d.src=r;case 16:case"end":return t.stop()}},t,e)}))()}},mounted:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getImgUrl();case 2:e.init();case 3:case"end":return t.stop()}},t,e)}))()}},me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("div",{ref:"canvasWrapper",staticClass:"canvasWrapper"}),e._v(" "),a("div",{staticClass:"btnBox"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sendPoint}},[e._v("确认并下一个")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.revocation}},[e._v("撤销")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.discard}},[e._v("丢弃")])],1),e._v(" "),a("div",{staticClass:"countBox"},[a("span",[e._v("标记额头数目："+e._s(e.count[0]))]),e._v(" "),a("span",[e._v("标记下巴数目："+e._s(e.count[1]))])])])},staticRenderFns:[]};var _e=a("VU/8")(ve,me,!1,function(e){a("gnWR")},"data-v-5ba8e999",null).exports,be={data:function(){return{fileUrl:"",imgId:"",info:"",count:{0:0,1:1}}},methods:{sendPoint:function(){var e=this;return u()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(e.imgId,1,e.info);case 2:a=t.sent,console.log(a),e.discard();case 5:case"end":return t.stop()}},t,e)}))()},discard:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getImgUrl();case 2:e.info="";case 3:case"end":return t.stop()}},t,e)}))()},getImgUrl:function(){var e=this;return u()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(1);case 2:return a=t.sent,e.fileUrl=E(a.data.data.url),e.imgId=a.data.data.img_id,t.next=7,U(e.$store.state.userInfo.username);case 7:a=t.sent,e.count=a.data.data;case 9:case"end":return t.stop()}},t,e)}))()}},mounted:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getImgUrl();case 2:case"end":return t.stop()}},t,e)}))()}},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("img",{staticClass:"img",attrs:{src:e.fileUrl}}),e._v(" "),a("div",{staticClass:"select"},[a("el-radio",{attrs:{label:"118"},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}},[e._v("方下巴")]),e._v(" "),a("el-radio",{attrs:{label:"119"},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}},[e._v("圆下巴")]),e._v(" "),a("el-radio",{attrs:{label:"120"},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}},[e._v("尖下巴")])],1),e._v(" "),a("div",{staticClass:"btnBox"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sendPoint}},[e._v("确认并下一个")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.discard}},[e._v("丢弃")])],1),e._v(" "),a("div",{staticClass:"countBox"},[a("span",[e._v("标记额头数目："+e._s(e.count[0]))]),e._v(" "),a("span",[e._v("标记下巴数目："+e._s(e.count[1]))])])])},staticRenderFns:[]};var we=a("VU/8")(be,ge,!1,function(e){a("UJUZ")},"data-v-6614e158",null).exports,xe={data:function(){return{fileUrl:"",imgId:"",info:"",count:{0:0,1:1,2:2}}},methods:{sendPoint:function(){var e=this;return u()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(e.imgId,2,e.info);case 2:a=t.sent,console.log(a),e.discard();case 5:case"end":return t.stop()}},t,e)}))()},discard:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getImgUrl();case 2:e.info="";case 3:case"end":return t.stop()}},t,e)}))()},getImgUrl:function(){var e=this;return u()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(2);case 2:return a=t.sent,e.fileUrl=E(a.data.data.url),e.imgId=a.data.data.img_id,t.next=7,U(e.$store.state.userInfo.username);case 7:a=t.sent,e.count=a.data.data;case 9:case"end":return t.stop()}},t,e)}))()}},mounted:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getImgUrl();case 2:case"end":return t.stop()}},t,e)}))()}},ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("img",{staticClass:"img",attrs:{src:e.fileUrl}}),e._v(" "),a("div",{staticClass:"select"},[a("el-radio",{attrs:{label:"0"},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}},[e._v("骨骼感强烈")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}},[e._v("中等")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}},[e._v("脸型圆润")])],1),e._v(" "),a("div",{staticClass:"btnBox"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sendPoint}},[e._v("确认并下一个")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.discard}},[e._v("丢弃")])],1),e._v(" "),a("div",{staticClass:"countBox"},[a("span",[e._v("标记额头数目："+e._s(e.count[0]))]),e._v(" "),a("span",[e._v("标记下巴数目："+e._s(e.count[1]))]),e._v(" "),a("span",[e._v("标记骨骼感数目："+e._s(e.count[2]))])])])},staticRenderFns:[]};var ye=a("VU/8")(xe,ke,!1,function(e){a("+0oZ")},"data-v-73601418",null).exports,Ie={data:function(){return{fileUrl:"",imgId:"",info:""}},methods:{sendPoint:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(e.imgId,2,e.info);case 2:t.sent,e.$message({type:"success",message:"更新成功!"});case 4:case"end":return t.stop()}},t,e)}))()},discard:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z(e.imgId,2);case 3:e.$message({type:"success",message:"丢弃成功!"}),e.$router.go(-1),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},getImgUrl:function(){var e=this;return u()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.imgId=e.$route.query.id,t.next=3,S(e.imgId);case 3:a=t.sent,e.fileUrl=E(a.data.data.url),e.info=a.data.data[2];case 6:case"end":return t.stop()}},t,e)}))()}},mounted:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getImgUrl();case 2:case"end":return t.stop()}},t,e)}))()}},Ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("img",{staticClass:"img",attrs:{src:e.fileUrl}}),e._v(" "),a("div",{staticClass:"select"},[a("el-radio",{attrs:{label:"0"},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}},[e._v("骨骼感强烈")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}},[e._v("中等")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}},[e._v("脸型圆润")])],1),e._v(" "),a("div",{staticClass:"btnBox"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sendPoint}},[e._v("更改")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.discard}},[e._v("丢弃")])],1)])},staticRenderFns:[]};var $e=a("VU/8")(Ie,Ce,!1,function(e){a("FdAB")},"data-v-cd96a7ca",null).exports,Ue={data:function(){return{scaling:1,circles:[],fileUrl:"http://os6zbdtt2.bkt.clouddn.com/Fmn93Hl1NzY2A9dP-FgBmrNzRxMa?nsukey=SoEyfKwopX0ZH%2FuoHP1Ua0s6xaa4DL6iW19AcUv6O%2Boenz4C25HDtZSIlkpHXh8NSvsi1fjAEGrCYrW%2BIpwRz%2FlYmzj53JVNt8iIgXERi2XX6VG5hWn8Mx75U%2F2qHQcvN9TJGT7y%2BXsjhLvjHAMP6vReveDWDdxKD9e46hk6rsuZUMU%2BznUPpAa8txpzGarQNoG2a%2FfZCvU4yg0LhZQBAg%3D%3D",imgId:""}},methods:{formDataCircles:function(){this.circles=this.circles.map(function(e){return{x:e[0],y:e[1]}})},discard:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z(e.imgId,0);case 3:e.$message({type:"success",message:"丢弃成功!"}),e.$router.go(-1),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},sendPoint:function(){var e=this;return u()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.circles.map(function(t){return[parseInt(t.x*e.scaling),parseInt(t.y*e.scaling)]}),t.next=3,$(e.imgId,0,ee()(a));case 3:t.sent,e.$refs.canvasWrapper.removeChild(e.$refs.canvasWrapper.firstChild),e.init(),e.$message({type:"success",message:"更改成功!"});case 7:case"end":return t.stop()}},t,e)}))()},revocation:function(){this.circles.pop(),this.$refs.canvasWrapper.removeChild(this.$refs.canvasWrapper.firstChild),this.init()},getImgUrl:function(){var e=this;return u()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.imgId=e.$route.query.id,t.next=3,S(e.imgId);case 3:a=t.sent,e.fileUrl=E(a.data.data.url),e.circles=JSON.parse(a.data.data[0]);case 6:case"end":return t.stop()}},t,e)}))()},init:function(){var e=this;return u()(l.a.mark(function t(){var a,n,r,s,i,o,c,u,d,f,p;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:p=function(e){console.log(e);var t=e.pageX-s.getBoundingClientRect().left,n=e.pageY-s.getBoundingClientRect().top;a.circles.push({x:t,y:n,scale:!0}),f(u),console.log(a.circles)},f=function(e){i.clearRect(0,0,s.width,s.height),i.drawImage(e,0,0,s.width,s.height);for(var t=0;t<n.length;t++){var r=n[t];r.scale||(r.scale=!0,r.x=r.x/a.scaling,r.y=r.y/a.scaling),i.font="12px blod",i.fillStyle="red",i.fillText(t+1,r.x+8,r.y-6),i.globalAlpha=.85,i.beginPath(),i.arc(r.x,r.y,o,0,2*Math.PI),i.fillStyle="blue",i.fill()}},a=e,n=e.circles,r=e.fileUrl,s=document.createElement("canvas"),i=s.getContext("2d"),o=3,c=e.$refs.canvasWrapper.offsetWidth,e.$refs.canvasWrapper.style.height=c+"px",u=void 0,d=new Image,s.onmousedown=p,d.onload=function(e){this.width>this.height?a.scaling=this.width/c:a.scaling=this.height/c,s.width=this.width/a.scaling,s.height=this.height/a.scaling,console.log(a.scaling,s.width,s.height),f(u=this),a.$refs.canvasWrapper.appendChild(s)},d.src=r;case 16:case"end":return t.stop()}},t,e)}))()}},mounted:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getImgUrl();case 2:e.formDataCircles(),e.init();case 4:case"end":return t.stop()}},t,e)}))()}},Fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("div",{ref:"canvasWrapper",staticClass:"canvasWrapper"}),e._v(" "),a("div",{staticClass:"btnBox"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sendPoint}},[e._v("更改")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.revocation}},[e._v("撤销")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.discard}},[e._v("丢弃")])],1)])},staticRenderFns:[]};var Se=a("VU/8")(Ue,Fe,!1,function(e){a("yRgL")},"data-v-5c6e0bc3",null).exports,ze={data:function(){return{fileUrl:"",imgId:"",info:""}},methods:{sendPoint:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(e.imgId,1,e.info);case 2:t.sent,e.$message({type:"success",message:"更新成功!"});case 4:case"end":return t.stop()}},t,e)}))()},discard:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z(e.imgId,1);case 3:e.$message({type:"success",message:"丢弃成功!"}),e.$router.go(-1),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},getImgUrl:function(){var e=this;return u()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.imgId=e.$route.query.id,t.next=3,S(e.imgId);case 3:a=t.sent,e.fileUrl=E(a.data.data.url),e.info=a.data.data[1];case 6:case"end":return t.stop()}},t,e)}))()}},mounted:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getImgUrl();case 2:case"end":return t.stop()}},t,e)}))()}},Ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("img",{staticClass:"img",attrs:{src:e.fileUrl}}),e._v(" "),a("div",{staticClass:"select"},[a("el-radio",{attrs:{label:"118"},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}},[e._v("方下巴")]),e._v(" "),a("el-radio",{attrs:{label:"119"},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}},[e._v("圆下巴")]),e._v(" "),a("el-radio",{attrs:{label:"120"},model:{value:e.info,callback:function(t){e.info=t},expression:"info"}},[e._v("尖下巴")])],1),e._v(" "),a("div",{staticClass:"btnBox"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sendPoint}},[e._v("更改")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.discard}},[e._v("丢弃")])],1)])},staticRenderFns:[]};var Re=a("VU/8")(ze,Ee,!1,function(e){a("k37S")},"data-v-72ccdf10",null).exports,Be={data:function(){return{users:[]}},methods:{goUserDetail:function(e){console.log(e),this.$router.push({path:"/userdetail",query:{username:e}})},init:function(){var e=this;return u()(l.a.mark(function t(){var a,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h()({url:m+"features/summary",method:"get",withCredentials:!0});case 2:a=t.sent,n=a.data.data,e.users=Y()(n).map(function(e){return{username:e,forehead_count:n[e][0],jaw_count:n[e][1],skeleton_count:n[e][2]}});case 5:case"end":return t.stop()}},t,e)}))()}},mounted:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:case"end":return t.stop()}},t,e)}))()}},qe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.users}},[a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"forehead_count",label:"标记额头数",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"jaw_count",label:"标记下巴数",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"skeleton_count",label:"标记骨骼感",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.goUserDetail(t.row.username)}}},[e._v("查看详情")])]}}])})],1)],1)},staticRenderFns:[]};var De=a("VU/8")(Be,qe,!1,function(e){a("PWEV")},"data-v-5fd18cf6",null).exports,je={data:function(){return{activeName:"first",qiniuUrl:E,jaw:{data:[],page:1,size:20,count:0},forehead:{data:[],page:1,size:20,count:0},skeleton:{data:[],page:1,size:20,count:0}}},beforeRouteEnter:function(e,t,a){"/users"==t.path?e.meta.keepAlive=!1:e.meta.keepAlive=!0,a()},methods:{goForehead:function(e){this.$router.push({path:"/updateforehead",query:{id:e}})},goJaw:function(e){this.$router.push({path:"/updatejaw",query:{id:e}})},goSkeleton:function(e){this.$router.push({path:"/updateskeleton",query:{id:e}})},getForhead:function(e){var t=this;return u()(l.a.mark(function a(){var n,r,s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.$route.query.username,r=t.forehead.size,a.next=4,F(n,0,e,r);case 4:s=a.sent,t.forehead.data=s.data.data[0];case 6:case"end":return a.stop()}},a,t)}))()},getJaw:function(e){var t=this;return u()(l.a.mark(function a(){var n,r,s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.$route.query.username,r=t.jaw.size,a.next=4,F(n,1,e,r);case 4:s=a.sent,t.jaw.data=s.data.data[1];case 6:case"end":return a.stop()}},a,t)}))()},getSkeleton:function(e){var t=this;return u()(l.a.mark(function a(){var n,r,s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.$route.query.username,r=t.jaw.size,a.next=4,F(n,2,e,r);case 4:s=a.sent,t.skeleton.data=s.data.data[2];case 6:case"end":return a.stop()}},a,t)}))()},init:function(){var e=this;return u()(l.a.mark(function t(){var a,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$route.query.username,t.next=3,U(a);case 3:n=t.sent,e.forehead.count=n.data.data[0],e.jaw.count=n.data.data[1],e.skeleton.count=n.data.data[2],e.getForhead(),e.getJaw(),e.getSkeleton();case 10:case"end":return t.stop()}},t,e)}))()}},mounted:function(){var e=this;return u()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:case"end":return t.stop()}},t,e)}))()}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"额头",name:"first"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.forehead.data}},[a("el-table-column",{attrs:{label:"照片",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{style:{backgroundImage:"url("+e.qiniuUrl(t.row.url)+")",backgroundSize:"cover",width:"75px",height:"75px"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"照片id",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.goForehead(t.row.id)}}},[e._v("查看额头")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":e.forehead.size,layout:"prev, pager, next",total:e.forehead.count},on:{"current-change":e.getForhead}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"下巴",name:"second"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.jaw.data}},[a("el-table-column",{attrs:{label:"照片",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{style:{backgroundImage:"url("+e.qiniuUrl(t.row.url)+")",backgroundSize:"cover",width:"75px",height:"75px"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"照片id",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.goJaw(t.row.id)}}},[e._v("查看下巴")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":e.jaw.size,layout:"prev, pager, next",total:e.jaw.count},on:{"current-change":e.getJaw}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"骨骼感",name:"three"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.skeleton.data}},[a("el-table-column",{attrs:{label:"照片",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{style:{backgroundImage:"url("+e.qiniuUrl(t.row.url)+")",backgroundSize:"cover",width:"75px",height:"75px"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"照片id",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.goSkeleton(t.row.id)}}},[e._v("查看骨骼感")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":e.skeleton.size,layout:"prev, pager, next",total:e.skeleton.count},on:{"current-change":e.getSkeleton}})],1)],1)},staticRenderFns:[]};var Le=a("VU/8")(je,Pe,!1,function(e){a("a3vL")},"data-v-d5775470",null).exports,Ae=a("NYxO"),Ne=a("2mV7");n.default.use(Ae.a);var Te=new Ae.a.Store({modules:Ne.default}),We={checkAuth:function(){return e=u()(l.a.mark(function e(t,a,n){var r,s,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.matched.some(function(e){return e.meta.requireAuth})){e.next=21;break}if(!Te.state.userInfo.isLogin){e.next=5;break}n(),e.next=19;break;case 5:return e.prev=5,e.next=8,h()({url:m+"features/issignin",method:"get",withCredentials:!0});case 8:r=e.sent,s=r.data.data.is_sign_in,i=r.data.data.username,Te.commit("SET_USER_ISLOGIN",s),Te.commit("SET_USERNAME",i),s?n():n("/login"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.log(e.t0);case 19:e.next=22;break;case 21:n();case 22:case"end":return e.stop()}},e,this,[[5,16]])})),function(t,a,n){return e.apply(this,arguments)};var e}};n.default.use(i.a);var Ve=new i.a({routes:[{path:"/",redirect:"/choose"},{path:"/login",component:P},{path:"/register",component:N},{path:"/choose",component:he,meta:{requireAuth:!0}},{path:"/forehead",component:_e,meta:{requireAuth:!0}},{path:"/updateforehead",component:Se,meta:{requireAuth:!0}},{path:"/users",component:De,meta:{requireAuth:!0,keepAlive:!0}},{path:"/userdetail",component:Le,meta:{requireAuth:!0,keepAlive:!0}},{path:"/jaw",component:we,meta:{requireAuth:!0}},{path:"/updatejaw",component:Re,meta:{requireAuth:!0}},{path:"/skeleton",component:ye,meta:{requireAuth:!0}},{path:"/updateskeleton",component:$e,meta:{requireAuth:!0}},{path:"/pc",component:W,children:[{path:"index",name:"Index",component:q},{path:"train",name:"Train",component:M},{path:"label",name:"Label",component:G},{path:"update_label",name:"UpdateLabel",component:ie},{path:"feature",name:"Feature",component:ce},{path:"test",name:"TestAiLabelFace",component:fe},{path:"nose_point",name:"NosePoint",component:ne}]}]});Ve.beforeEach(We.checkAuth());var He=Ve,Me=a("zL8q"),Oe=a.n(Me);a("tvR6");n.default.config.productionTip=!1,n.default.use(Oe.a),new n.default({el:"#app",router:He,store:Te,components:{App:s},template:"<App/>"})},OhVj:function(e,t){},PI9Q:function(e,t){},PWEV:function(e,t){},QmKZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={state:{isLogin:!1,username:""},mutations:{SET_USER_ISLOGIN:function(e,t){e.isLogin=t},SET_USERNAME:function(e,t){e.username=t}},getters:{}}},UJUZ:function(e,t){},WBNu:function(e,t){},a3vL:function(e,t){},b5gC:function(e,t){},gNcp:function(e,t,a){var n={"./index.js":"2mV7","./userInfo.js":"QmKZ"};function r(e){return a(s(e))}function s(e){var t=n[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id="gNcp"},gnWR:function(e,t){},gsAJ:function(e,t){},k37S:function(e,t){},oWsi:function(e,t){},tvR6:function(e,t){},vUjk:function(e,t){},xx10:function(e,t){},yRgL:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c1bdaeddfb731bfad387.js.map